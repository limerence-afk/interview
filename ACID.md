Давайте пройдемся по каждой букве ACID и посмотрим на примерах, чем архив лучше 10 разных файлов. И чем транзакция лучше 10 отдельных запросов.

1.  [Atomicity — Атомарность](https://habr.com/ru/post/555920/#atomicity)
    
2.  [Consistency — Согласованность](https://habr.com/ru/post/555920/#consistency)
    
3.  [Isolation — Изолированность](https://habr.com/ru/post/555920/#isolation)
    
4.  [Durability — Надёжность](https://habr.com/ru/post/555920/#durability)


### Atomicity — Атомарность

Атомарность гарантирует, что каждая транзакция будет выполнена полностью или не будет выполнена совсем. Не допускаются промежуточные состояния.

Друг познается в беде, а база данных — в работе с ошибками. О, если бы всё всегда было хорошо и без ошибок! Тогда бы никакие ACID были бы не нужны. Но как только возникает ошибка, атомарность становится очень важна.

### Consistency — Согласованность

> Транзакция, достигающая своего нормального завершения (_EOT — end of transaction_, завершение транзакции) и, тем самым, фиксирующая свои результаты, сохраняет согласованность базы данных. Другими словами, каждая успешная транзакция по определению фиксирует только допустимые результаты ​ [wikipedia](https://ru.wikipedia.org/wiki/ACID)

Это свойство вытекает из предыдущего. Благодаря тому, что транзакция не допускает промежуточных результатов, база остается консистентной. Есть такое определение транзакции: «Упорядоченное множество операций, **переводящих базу данных из одного согласованного состояния в другое**». То есть до выполнения операции и после база остается консистентной (в переводе на русский — согласованной).

### Isolation — Изолированность

Во время выполнения транзакции параллельные транзакции не должны оказывать влияния на её результат.

Если у нас система строго для одного человека, проблем не будет. А если пользователей несколько? Тогда транзакции запускают в параллель — для ускорения работы системы. А иначе представьте себе, что вы делаете заказ в интернет-магазине и система вам говорит: «Вы в очереди, перед вами еще 100 человек хотят заказ оформить, подождите». Бред же? Бред!

**1 эффект: "Потерянная запись"**
**2 эффект: "Грязное чтение"**
**3 эффект: "Повторимое чтение"**
**4 эффект: "Фантомы"**

### Как бороться

Как бороться с этими проблемами? Нужно изолировать транзакцию. Способов есть несколько, но основные — блокировки и версии.

Блокировки — это когда мы блокируем данные в базе. Можно заблокировать одну строку в таблице, а можно всю таблицу. Можно заблокировать данные на редактирование, а можно и на чтение тоже.

Подробнее о блокировках можно почитать тут:

-   [Блокировка (СУБД)](https://ru.wikipedia.org/wiki/%D0%91%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0_(%D0%A1%D0%A3%D0%91%D0%94)) — статья из вики
    
-   [Режимы блокировки](http://serversql.ru/upravlenie-parallelnoj-rabotoj/rezhimy-blokirovki.html) — здесь хорошо описано, в чем отличие эксклюзивной от разделямой блокировки
    
-   [Transaction Isolation Levels in DBMS](https://www.geeksforgeeks.org/transaction-isolation-levels-dbms/) — статья на английском, но хорошо прошлись по разным уровням изоляции базы

### Durability — Надёжность

Если пользователь получил подтверждение от системы, что транзакция выполнена, он может быть уверен, что сделанные им изменения не будут отменены из-за какого-либо сбоя. Обесточилась система, произошел сбой в оборудовании? На выполненную транзакцию это не повлияет.